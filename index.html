<html>
  <body>
    <h1>Hello World - Primeiros passos na programação</h1>
    <script>

      class Release {
        constructor(category, type, value) {
          if (type !== "revenue" && type !== "expense") {
            throw new Error("Lançamento Inválido: Tipo deve ser receita ou despesa")
          }
          if (value <= 0) {
            throw new Error("Lançamento Inválido: Valor deve ser maior que zero")
          }
          if (category === "") {
            throw new Error("Lançamento Inválido: A categoria é obrigatória")
          }

          this.category = category
          this.type = type
          this.value = value
        }
      }

      newRelease1 = new Release("Salário porreta", "revenue", 10000);

      console.log( newRelease1 );

      function round(value) {
        return Math.round(value * 100) / 100
      }

      function calculateInterest(value) { // calcula juros
        interest = round(value * 0.1)
        return interest
      }

      function calculateIncome(value) { // calcula renda
        income = round(value * 0.005)
        return income
      }

      function calculateBalance(month, currentBalance, releases) {
        console.log(month);
        balance = currentBalance
        for (release of releases) {
          if (release.type === "revenue") {
            balance += release.value
          } 
          if (release.type === "expense") {
            balance -= release.value
          }
        }
        isNegative = balance < 0
        if (isNegative) {
          interest = calculateInterest(balance)
          balance = round(balance + interest)
        } else {
          income = calculateIncome(balance)
          balance = round(balance + income)
        }
        return balance // calcula saldo
      }

      initialBalance = 0
      month1 = "Janeiro"
      januaryReleases = [
        { category: "Salário", type: "revenue", value: 3000 }, 
        { category: "Aluguel", type: "expense", value: 1000 }, 
        { category: "Conta de Luz", type: "expense", value: 200 }, 
        { category: "Conta de Água", type: "expense", value: 100 }, 
        { category: "Internet", type: "expense", value: 100 }, 
        { category: "Transporte", type: "expense", value: 300 }, 
        { category: "Lazer", type: "expense", value: 300 }, 
        { category: "Alimentação", type: "expense", value: 500 }, 
        { category: "Condomínio", type: "expense", value: 300 }, 
        { category: "Farmácia", type: "expense", value: 100 }
      ]
      balance1 = calculateBalance(month1, initialBalance, januaryReleases)
      console.log(balance1)

      month2 = "Fevereiro"
      februaryReleases = [
        { category: "Salário", type: "revenue", value: 3000 }, 
        { category: "Aluguel", type: "expense", value: 1200 }, 
        { category: "Conta de Luz", type: "expense", value: 250 }, 
        { category: "Conta de Água", type: "expense", value: 100 }, 
        { category: "Internet", type: "expense", value: 100 }, 
        { category: "Transporte", type: "expense", value: 500 }, 
        { category: "Alimentação", type: "expense", value: 1000 }, 
        { category: "Condomínio", type: "expense", value: 400 }
      ]
      balance2 = calculateBalance(month2, balance1, februaryReleases)
      console.log(balance2)

      month3 = "Março"
      marchReleases = [
        { category: "Salário", type: "revenue", value: 4000 }, 
        { category: "Aluguel", type: "expense", value: 1200 }, 
        { category: "Conta de Luz", type: "expense", value: 200 }, 
        { category: "Conta de Água", type: "expense", value: 100 }, 
        { category: "Internet", type: "expense", value: 200 }, 
        { category: "Transporte", type: "expense", value: 500 }, 
        { category: "Lazer", type: "expense", value: 800 }, 
        { category: "Alimentação", type: "expense", value: 1000 }, 
        { category: "Condomínio", type: "expense", value: 400 }
      ]
      balance3 = calculateBalance(month3, balance2, marchReleases)
      console.log(balance3)

      annualBalance = balance3
      console.log("Balanço anual")
      console.log(annualBalance)
    </script>
  </body>
</html>